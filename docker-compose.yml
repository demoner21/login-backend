services:
  duckdb:
    image: duckdb/duckdb:1.4.2
    container_name: login-backend-duckdb
    environment:
      DUCKDB_DATABASE: ${DUCKDB_DATABASE:-app.db}
      DUCKDB_EXTENSIONS: ${DUCKDB_EXTENSIONS:-spatial,httpfs,json}
    ports:
      - "${DUCKDB_PORT:-8080}:8080"
    volumes:
      - duckdb_data:/data
      - ./scripts/init.sql:/docker-entrypoint-initdb.d/init.sql
    restart: unless-stopped
    command: |
      /bin/bash -c "
        echo 'üöÄ Inicializando DuckDB...'
        echo 'üìÅ Database: $${DUCKDB_DATABASE}'
        /duckdb /data/$${DUCKDB_DATABASE} -init /docker-entrypoint-initdb.d/init.sql
        echo '‚úÖ DuckDB pronto!'
        tail -f /dev/null
      "

volumes:
  duckdb_data: